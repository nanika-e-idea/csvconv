(window.webpackJsonp=window.webpackJsonp||[]).push([[9,4],{205:function(e,t,n){var content=n(211);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(115).default)("b4748cc0",content,!0,{sourceMap:!1})},206:function(e,t,n){var content=n(213);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(115).default)("004b471e",content,!0,{sourceMap:!1})},210:function(e,t,n){"use strict";n(205)},211:function(e,t,n){var l=n(114)(!1);l.push([e.i,".droparea,.file_up{display:flex;justify-content:center}.droparea{box-sizing:border-box;border:3px dashed #aaa;border-radius:30px;width:900px;height:400px;max-width:90%;max-height:50%;align-items:center;font-size:40px;font-weight:600;color:#aaa}.enter{background-color:#cef}",""]),e.exports=l},212:function(e,t,n){"use strict";n(206)},213:function(e,t,n){var l=n(114)(!1);l.push([e.i,".data_counter{width:100%;text-align:center}",""]),e.exports=l},223:function(e,t,n){var content=n(276);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(115).default)("1b7833da",content,!0,{sourceMap:!1})},227:function(e,t,n){"use strict";n.r(t);var l=n(214),o=(n(36),{data:function(){return{onDrag:!1,files:[],filename:null,datalength:null}},mounted:function(){},methods:{clickEvent:function(){},dragEnter:function(){this.onDrag=!0},dragLeave:function(){this.onDrag=!1},dropFile:function(e){this.onDrag=!1,this.files=Object(l.a)(e.dataTransfer.files),this.filename=this.files[0].name,console.log("[FileUp]file:"+this.filename),this.$emit("file-object",this.files)}}}),r=(n(210),n(34)),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file_up"},[n("div",{staticClass:"droparea",class:{enter:this.onDrag},on:{dragenter:e.dragEnter,dragleave:e.dragLeave,dragover:function(e){e.preventDefault()},drop:function(t){return t.preventDefault(),t.stopPropagation(),e.dropFile.apply(null,arguments)}}},[e._v("\n    Step1.CSVファイルをここにドロップ\n  ")])])}),[],!1,null,null,null);t.default=component.exports},228:function(e,t,n){"use strict";n.r(t);var l={props:["fileinfo"]},o=(n(212),n(34)),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"data_counter"},[n("p",[e._v("ファイル名： "+e._s(e.fileinfo.filename)+"  |  データ件数： "+e._s(e.fileinfo.datalength)+"件  |  重複削除後： "+e._s(e.fileinfo.corectedlength)+"件")])])}),[],!1,null,null,null);t.default=component.exports},275:function(e,t,n){"use strict";n(223)},276:function(e,t,n){var l=n(114)(!1);l.push([e.i,".file_dl{width:100%;text-align:center}.btn_dl{box-sizing:border-box;width:900px;height:50px;max-width:90%;border:none;border-radius:25px;background-color:#29a;font-size:20px;font-weight:600;color:#fff;filter:drop-shadow(2px 2px 1px rgba(0,0,0,.5))}",""]),e.exports=l},283:function(e,t,n){"use strict";n.r(t);n(229),n(17),n(231),n(237),n(239),n(240),n(241),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(265),n(266),n(267),n(47),n(159),n(44),n(27),n(65),n(36),n(30),n(160);var l=n(1).a.extend({data:function(){return{files:[],databody:"",fileinfo:{filename:"---",datalength:0,corectedlength:0},newdata:"",filestatus:"Empty"}},methods:{fileObject:function(e){this.files=e;var t=this.files[0],l=new FileReader,o=this;l.readAsArrayBuffer(t),l.onload=function(){var e=n(268),r=new Uint8Array(l.result),f=e.convert(r,{to:"UNICODE",from:"SJIS",type:"string"});o.databody=f;for(var c="[%~{/comma/}~%]",d=o.databody.split(/\r\n|\r|\n/)[0].split("\t").length,h=Array.from(o.databody.replace(/\r\n|\r|\n/g,"\n")),v=[],x=[],_=!1,m=!1,w="",i=0;i<h.length;i++)"<"==h[i]&&(console.log("tag Open"),m=!0),">"==h[i]&&(console.log("tag Close"),m=!1),'"'==h[i]?(m||(_=0==_),w+=h[i]):"\t"!=h[i]&&"\n"!=h[i]||_?","==h[i]&&_?w+=c:w+=h[i]:(x.push(w),w="",x.length==d&&(v.push(x),x=[]));console.log(v[0][0]);var y={dataList:[]};for(i=0;i<v.length;i++)0==i?y.header=v[i]:y.dataList.push(v[i]);var C=0,D="",j=0,E="",line=v[0][0].split(",");for(i=0;i<line.length;i++)console.log("line["+i+"] "+line[i]),"適用終了日"==line[i]&&(C=i),E+=line[i],i<line.length-1?E+=",":E+="\n";D+=E;for(i=1;i<v.length;i++){if(E="",""==(line=v[i][0].split(","))[C]){for(var O=0;O<line.length;O++)E+=line[O].replace(c,","),O<line.length-1?E+=",":E+="\n";j++}D+=E}console.log(D);var S=e.convert(function(e){var i,t=[],n=e.length;for(i=0;i<n;i++)t.push(e.charCodeAt(i));return t}(D),"SJIS","UNICODE"),U=new Uint8Array(S);o.fileinfo={filename:t.name,datalength:v.length-1,corectedlength:j},o.newdata=U,console.log(o.fileinfo),o.filestatus="Standby"}},fileDL:function(){var e=new Blob([this.newdata],{type:"text/plan"}),link=document.createElement("a");link.href=URL.createObjectURL(e),link.download="corrected_"+this.fileinfo.filename,link.click()}}}),o=(n(275),n(34)),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("h1",[e._v("CSV preconverter")]),e._v(" "),n("FileUp",{on:{"file-object":function(t){return e.fileObject(t,e.files)}}}),e._v(" "),n("DataCount",{attrs:{fileinfo:e.fileinfo}}),e._v(" "),n("div",{staticClass:"file_dl"},[n("button",{staticClass:"btn btn_dl",attrs:{type:"button"},on:{click:e.fileDL}},[e._v("Step2.整形済みCSVファイルをダウンロードする")])])],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{FileUp:n(227).default,DataCount:n(228).default})}}]);